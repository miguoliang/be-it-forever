# Test Configuration - Use Quarkus Dev Services for automatic PostgreSQL Testcontainer

# Explicitly enable Dev Services for tests
quarkus.datasource.devservices.enabled=true
quarkus.datasource.devservices.image-name=postgres:16

# Database configuration - Dev Services will auto-configure the URL
# We must unset the URL properties from main config to let Dev Services work
quarkus.datasource.db-kind=postgresql

# Unset the reactive and JDBC URLs that are set in main application.properties
# By not defining them here, Dev Services will provide the correct URLs
# quarkus.datasource.reactive.url=  # DO NOT SET - let Dev Services configure
# quarkus.datasource.jdbc.url=      # DO NOT SET - let Dev Services configure

# JWT Test Configuration
mp.jwt.verify.issuer=https://test.englishlearning.com
# Use dev public key that matches the dev private key used to sign test tokens
mp.jwt.verify.publickey.location=META-INF/resources/dev-publicKey.pem
quarkus.smallrye-jwt.enabled=true

# Disable unnecessary features for faster test startup
quarkus.hibernate-orm.log.sql=false
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=db/migration

# Disable observability for tests
quarkus.otel.enabled=false
quarkus.micrometer.enabled=false
